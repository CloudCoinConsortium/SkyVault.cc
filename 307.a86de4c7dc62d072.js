"use strict";(self.webpackChunkskyvault=self.webpackChunkskyvault||[]).push([[307],{8307:(D,C,l)=>{l.r(C),l.d(C,{RegisterModule:()=>q});var M=l(6019),_=l(4708),u=l(4762),f=l(7590),y=l(5043),t=l(3556),Z=l(3755),I=l(4071),P=l(5894),x=l(7537),v=l(3213),b=l(8329);const O=["autofocus"];function A(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",3),t._uU(2,"Get Your SkyVault"),t.qZA(),t.TgZ(3,"div",4),t.TgZ(4,"div",5),t.TgZ(5,"div",6),t.TgZ(6,"label",7),t._uU(7,"SkyVault Address (Letters and Numbers Only) "),t.TgZ(8,"div",8),t._UZ(9,"img",9),t.TgZ(10,"div",10),t.TgZ(11,"span"),t.TgZ(12,"ul"),t.TgZ(13,"li"),t._uU(14,"First character must be a number or a letter."),t.qZA(),t.TgZ(15,"li"),t._uU(16,"Minus signs are ok. The last character must not be a minus sign."),t.qZA(),t.TgZ(17,"li"),t._uU(18,"Minimum length is 2 characters. Max length is 63 characters."),t.qZA(),t.TgZ(19,"li"),t._uU(20,"You can see the IP address of your SkyVault on the back of your SkyVault Pass Key that you will receive after completing this form."),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"input",11,12),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().wallet=s}),t.qZA(),t.TgZ(23,"span",13),t._uU(24,".skyvault.cc"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(25,"div",14),t.TgZ(26,"div",15),t.TgZ(27,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().register()}),t._uU(28,"Get Skyvault"),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(21),t.Q6J("ngModel",e.wallet)}}function k(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ng-lottie",17),t.NdJ("animationCreated",function(s){return t.CHM(e),t.oxw().animationCreated(s)}),t.qZA(),t.TgZ(2,"div",18),t._uU(3),t.qZA(),t.TgZ(4,"div",19),t.TgZ(5,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().hideErrorMessage()}),t._uU(6," Back "),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("options",e.errorOptions),t.xp6(2),t.Oqu(e.errorMessage)}}function S(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",19),t.TgZ(2,"ng-lottie",20),t.NdJ("animationCreated",function(s){return t.CHM(e),t.oxw().animationCreated(s)}),t.qZA(),t.TgZ(3,"span",21),t._uU(4),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("options",e.options),t.xp6(2),t.hij(" ",e.progressMessage,"")}}function R(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).downloadImage()}),t._UZ(1,"fa-icon",33),t._uU(2," \xa0 Download Your SkyVault Pass Key "),t.qZA()}}function N(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).login()}),t._uU(1," Log In Now "),t.qZA()}}function E(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",5),t.TgZ(2,"div",22),t.TgZ(3,"div",19),t._UZ(4,"img",23),t.TgZ(5,"span",24),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",25),t.TgZ(8,"div",26),t.TgZ(9,"a",27),t.NdJ("click",function(){return t.CHM(e),t.oxw().downloadImage()}),t._UZ(10,"img",28),t.qZA(),t.qZA(),t.TgZ(11,"div",26),t.TgZ(12,"p",29),t._uU(13,"You can log in to your SkyVault account by -"),t.qZA(),t.TgZ(14,"ul",30),t.TgZ(15,"li"),t._uU(16,"Uploading this card (Drop Pass Key)"),t.qZA(),t.TgZ(17,"li"),t._uU(18,"Manually typing in Pass Key details"),t.qZA(),t.qZA(),t.YNc(19,R,3,0,"button",31),t.YNc(20,N,2,0,"button",31),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(6),t.Oqu(e.completeMessage),t.xp6(4),t.Q6J("src",e.cardImage,t.LSH),t.xp6(9),t.Q6J("ngIf",!e.showLogin),t.xp6(1),t.Q6J("ngIf",e.showLogin)}}const L=[{path:"",component:(()=>{class o{constructor(e,n,s,i,r){this.auth=e,this.router=n,this.changeDetectorRef=s,this.skyvault=i,this.indc=r,this.faInfoCircle=y.sqG,this.selectedData=null,this.agreed=!1,this.registerTapped=!1,this.registerParams=null,this.complete=!1,this.cardImage=null,this.cardImageBlank=null,this.cardImageTest=null,this.errorMessage="",this.progressMessage="",this.completeMessage="",this.buttonText="Select CloudCoin",this.options={path:"/assets/animations/cloud_login.json"},this.errorOptions={path:"/assets/animations/error.json"},this.graphicText="",this.characters=[],this.events=[],this.places=[],this.things=[],this.verbs1=[],this.verbs2=[],this.picturePassword=[],this.generatedANS=[],this.showLogin=!1,this.loadingMessage=null,this.SetPictureModal=!1,this.showLoader=!1,this.showNormal=!0,this.showError=!1}ngOnInit(){localStorage.setItem("job","0"),this.auth.getLoggedIn()&&this.router.navigate(["/balance"]),this.watchIndicator=this.indc.currentRStatus.subscribe(e=>{0==Object.keys(e).length?(this.options={path:"/assets/animations/cloud_loading.json"},this.showLoading(!0),this.progressMessage="Contacting RAIDA..."):(this.options={path:"/assets/animations/cloud_login.json"},this.progressMessage="",this.showLoading(!1))})}ngOnDestroy(){this.watchIndicator&&this.watchIndicator.unsubscribe()}ngAfterViewInit(){this.autoFocusField.nativeElement.focus()}animationCreated(e){}showLoading(e){e?(this.showNormal=!1,this.showLoader=!0,this.showError=!1):(this.showNormal=!0,this.showLoader=!1,this.showError=!1)}showErrorMessage(e){this.errorMessage=e,this.showNormal=!1,this.showError=!0,this.showLoader=!1}hideErrorMessage(){this.errorMessage="",this.showNormal=!0,this.showError=!1,this.showLoader=!1}showCompleteMessage(e){this.errorMessage="",this.showNormal=!1,this.showError=!1,this.showLoader=!1,this.completeMessage=e,this.complete=!0}validateEmail(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}register(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.showLoading(!0),this.registerTapped)return void this.showLoading(!1);if(this.registerTapped=!0,!this.wallet||""===this.wallet)return this.showErrorMessage("Please enter a valid wallet name"),void(this.registerTapped=!1);if(!this.wallet.match(/[a-zA-Z0-9]{2,63}/))return this.showErrorMessage("Invalid wallet address. Only alphanumeric characters are allowed. Min length 2, Max length 63"),void(this.registerTapped=!1);if(!this.wallet.charAt(0).match(/[a-zA-Z0-9]/))return this.showErrorMessage("Invalid wallet address. The first character must be Number or Letter"),this.wallet="",void(this.registerTapped=!1);if("-"==this.wallet.charAt(this.wallet.length-1)||"-"==this.wallet.charAt(0))return this.showErrorMessage("Invalid wallet address. The last character cannot be a minus(-) sign"),this.wallet="",void(this.registerTapped=!1);if(this.walletName=this.wallet+".skyvault.cc",this.walletName&&"error"!==(yield this.skyvault.hostnameCheck(this.walletName)).status)return this.showErrorMessage("Skyvault already exists!!"),void(this.registerTapped=!1);localStorage.setItem("job","1");let e=this._getRandom(26e3,1e5),s=this.getCardData(e).pans;this.generatedANS=s;let i=yield this.skyvault.getFreeCoin(e,s);if(!("status"in i)||"done"!==i.status)return this.showErrorMessage("Registration failed!! Please try again."),console.log("Registration failed because ID coin could not be fetched"),this.registerTapped=!1,void localStorage.setItem("job","0");this.selectedData={cloudcoin:[i]},this.selectedData=JSON.stringify(this.selectedData),this.preRegister()})}preRegister(){return(0,u.mG)(this,void 0,void 0,function*(){if(!this.selectedData||this.selectedData==={})return this.showErrorMessage("Free coin could not be fetched, please try again"),this.registerTapped=!1,void localStorage.setItem("job","0");if(null!=this.selectedData){let e="",n=[],s=1;if(JSON.parse(this.selectedData).cloudcoin.forEach((i,r)=>{0===r&&(e=i.cc.sn,n=i.cc.an)}),""===e||n===[])return this.showErrorMessage("Registration failed!! Please try again."),this.registerTapped=!1,void localStorage.setItem("job","0");{let i=this.getCardData(e);if("done"!==i.status)return this.showErrorMessage("Error generating card from info"),void localStorage.setItem("job","0");{const r=this.makeCard(i.rand),a=r.number,g=i.cvv,h=i.pans;this.showLoading(!0),this.progressMessage="Registering Skyvault..",this.prepareCard(a,r,g,h,e,s)}}}else this.showErrorMessage("Something went wrong!! Please try again."),this.registerTapped=!1,localStorage.setItem("job","0")})}makeCard(e){const n="401"+e,s=n.split("").reverse().join("");let i=0;for(let p=0;p<s.length;p++){let m=parseInt(s.charAt(p));(p+3)%2&&(m*=2,m>9&&(m-=9)),i+=m}let r=10-i%10;10===r&&(r=0);const a=n+r,g=new Date;return g.setFullYear(g.getFullYear()+5),{number:a,expiry:g.getMonth()+1+"-"+g.getFullYear().toString().substr(-2)}}prepareCard(e,n,s,i,r,a){this.progressMessage="Generating Pass Key..";const g="1."+(parseInt(r)>>16&255)+"."+(parseInt(r)>>8&255)+"."+(255&parseInt(r));this.cardData={name:this.walletName,number:e,expiry:n.expiry,pin:s,ip:g},this.registerParams={name:this.walletName,coin:{sn:r,an:i}},this.addTextToImage("assets/images/card.png",this.cardData,this.registerParams,this.doRegister)}doRegister(e,n){return(0,u.mG)(this,void 0,void 0,function*(){e.progressMessage="Creating SkyVault Account..";try{let s=yield e.skyvault.register(n);"done"===s.status?e.generateCard(n):(this.showErrorMessage(s.errorText),this.registerTapped=!1,localStorage.setItem("job","0"))}catch(s){console.log(s),localStorage.setItem("job","0")}})}generateCard(e){return(0,u.mG)(this,void 0,void 0,function*(){this.progressMessage="SkyVault account created";const n={coins:[{sn:parseInt(e.coin.sn),nn:1,an:e.coin.an}],template:this.cardImageBlank};try{let s=yield this.skyvault.embedInImage(n);s.status&&"error"===s.status?(this.showErrorMessage(s.errorText),this.registerTapped=!1,localStorage.setItem("job","0")):(this.showCompleteMessage("Registration Successful!"),this.cardImage="data:image/png;base64,"+s)}catch(s){console.log(s)}})}addTextToImage(e,n,s,i){const r=document.createElement("canvas");r.setAttribute("width","700"),r.setAttribute("height","906");const a=r.getContext("2d"),g=this,h=new Image;h.src=e,h.onload=function(){a.drawImage(h,0,0),a.lineWidth=0,a.fillStyle="#FFFFFF",a.font="30px sans-serif",a.fillText(n.name,50,400),a.font="40px sans-serif",a.fillText(n.number.replace(/(.{4})/g,"$1 "),50,300),a.font="18px sans-serif",a.fillText("Keep these numbers secret, do not give to merchants",50,325),a.font="18px sans-serif",a.fillText("Share this name with others for receiving payments",50,425),a.font="25px sans-serif",a.fillText(n.expiry,450,355),a.fillStyle="#000000",a.fillText("CVV (keep secret): "+n.pin,50,675),a.fillStyle="#ffffff",a.fillText("IP "+String(n.ip),150,740),g.cardImageBlank=r.toDataURL(),i(g,s)}}downloadImage(){const e=document.createElement("a");e.href=this.cardImage,e.download=this.walletName+".png",e.click(),this.showLogin=!0}generateAN(){let e=[],n=this.skyvault.generateSeed();for(let s=0;s<25;s++)e[s]=f.MD5(s.toString()+n).toString(f.enc.Hex);return e}_getRandom(e,n){return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1)+e)}getCardData(e){let n="",i=(""+f.MD5(this.walletName)).split("");for(let d=0;d<i.length;d++)n+=parseInt(i[d],16);let r=n.slice(0,12),a=n.slice(12,16),h=this.makeCard(r).number,w=h.substring(3,h.length-1),p=[];for(let d=0;d<25;d++)p[d]=""+f.MD5(""+d+e+w+a);return{status:"done",pans:p,rand:r,cvv:a}}login(){return(0,u.mG)(this,void 0,void 0,function*(){const e={username:this.cardData.name,cardnumber:this.cardData.number.toString(),cvv:this.cardData.pin.toString()};this.complete=!1,this.progressMessage="Logging "+this.walletName+" to SkyVault",this.showLoading(!0),localStorage.setItem("job","1");let n=yield this.skyvault.loginWithCard(e);if(n)if(localStorage.setItem("job","0"),"error"===n.status)-1!==n.errorText.indexOf("Failed to resolve DNS name")?(console.log("Failed to resolve DNS name"),this.showErrorMessage("Authentication failure")):this.showErrorMessage(n.errorText);else if("done"===n.status){const s=n.cc;!s.an&&s.ans&&(s.an=s.ans),localStorage.setItem("cc",JSON.stringify(s)),localStorage.setItem("skyvault",this.walletName),localStorage.setItem("statements","true"),this.auth.checkLoginStatus(),setTimeout(()=>{this.router.navigate(["/balance"])},2500)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.r),t.Y36(_.F0),t.Y36(t.sBO),t.Y36(I._),t.Y36(P.Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-register"]],viewQuery:function(e,n){if(1&e&&t.Gf(O,5),2&e){let s;t.iGM(s=t.CRH())&&(n.autoFocusField=s.first)}},decls:6,vars:4,consts:[[1,"register-container"],[1,"container"],[4,"ngIf"],[1,"pageHeading"],[1,"register-credentials-inner"],[1,"row"],[1,"floatLbl"],["for","sv-add",1,"label-input-form"],[1,"customTooltipWrap"],["src","assets/images/info_circle.svg","alt","",1,"labelInfoIcon"],[1,"tooltipDescWrap"],["placeholder","username","type","text","name","wallet",1,"input-form",3,"ngModel","ngModelChange"],["autofocus",""],[1,"domainName"],[1,"gap20"],[2,"text-align","center"],[1,"buttonCustome",3,"click"],["height","100px",3,"options","animationCreated"],[1,"errorMsg"],[1,"text-center"],["height","150px",3,"options","animationCreated"],[2,"color","#ffffff"],[1,"col-md-10","offset-md-1"],["src","assets/images/check.svg","alt","check",1,"checkCircleIcon"],[1,"subInnerHeader"],[1,"row","cardUtlRow"],[1,"col-md-6"],["href","javascript:;",3,"click"],[1,"cardImg",3,"src"],[1,"textWhite"],[1,"cardLogUtility"],["class","buttonCustome","style","margin-top: 10px",3,"click",4,"ngIf"],[1,"buttonCustome",2,"margin-top","10px",3,"click"],["icon","cloud-download-alt"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,A,29,1,"ng-container",2),t.YNc(3,k,7,2,"ng-container",2),t.YNc(4,S,5,2,"ng-container",2),t.YNc(5,E,21,4,"ng-container",2),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",n.showNormal),t.xp6(1),t.Q6J("ngIf",n.showError),t.xp6(1),t.Q6J("ngIf",n.showLoader),t.xp6(1),t.Q6J("ngIf",n.complete))},directives:[M.O5,x.Fj,x.JJ,x.On,v.e$,b.BN],styles:['.register-container[_ngcontent-%COMP%]{height:100%;align-items:center}.register-container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .pageHeading[_ngcontent-%COMP%]{text-align:center}.register-container[_ngcontent-%COMP%]   .register-credentials-inner[_ngcontent-%COMP%]{max-width:710px;margin:30px auto auto}@media (max-width: 768px){.register-container[_ngcontent-%COMP%]   .register-credentials-inner[_ngcontent-%COMP%]{margin-top:20px}}@media (max-width: 600px){.register-container[_ngcontent-%COMP%]   .register-credentials-inner[_ngcontent-%COMP%]{margin-top:0}}.register-container[_ngcontent-%COMP%]   .picture-pass-heading[_ngcontent-%COMP%]{color:#fff;margin-top:0}.picPswInfoText[_ngcontent-%COMP%]{color:#fbfbfbcc;font-size:15px;margin:10px 0;text-align:justify}@media (max-width: 576px){.picPswInfoText[_ngcontent-%COMP%]{font-size:14px}}.modalWrap[_ngcontent-%COMP%]{max-height:93vh}.modalWrap[_ngcontent-%COMP%]   .set-picture-head[_ngcontent-%COMP%]{font-size:35px;color:#fff;padding-left:2%;margin-bottom:17px}.modalBody[_ngcontent-%COMP%]{max-height:80vh;overflow:auto}.flexed[_ngcontent-%COMP%]{display:flex;margin-bottom:0}.flexed[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:16px;color:#fff;margin-right:10px}@media (max-width: 576px){.flexed[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:14px!important}}.flexed[_ngcontent-%COMP%]   .text-two[_ngcontent-%COMP%]{color:#fbfbfb94;margin-bottom:0}@media (max-width: 576px){.flexed[_ngcontent-%COMP%]   .text-two[_ngcontent-%COMP%]{font-size:14px!important}}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0;height:initial;width:initial;margin-bottom:0;display:none;cursor:pointer}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;cursor:pointer}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"";-webkit-appearance:none;background-color:#74768e;border:2px solid #314461;box-shadow:0 1px 2px #0000000d,inset 0 -15px 10px -12px #0000000d;padding:10px;display:inline-block;position:relative;vertical-align:middle;cursor:pointer;border:1px solid #c6c7d1;margin-left:-8%;border-radius:5px;margin-right:2%}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;top:3px;left:5px;width:6px;height:14px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}.label-check[_ngcontent-%COMP%]{padding-left:7%}.input-checkbox[_ngcontent-%COMP%]   .label-check[_ngcontent-%COMP%]{font-size:16px;line-height:21px;color:#fff}@media (max-width: 576px){.input-checkbox[_ngcontent-%COMP%]   .label-check[_ngcontent-%COMP%]{font-size:14px}}.cardImg[_ngcontent-%COMP%]{width:100%}@media (max-width: 576px){.cardImg[_ngcontent-%COMP%]{margin-bottom:20px}}.textWhite[_ngcontent-%COMP%]{text-align:left;color:#fff;font-size:18px;margin-bottom:10px}@media (max-width: 576px){.textWhite[_ngcontent-%COMP%]{font-size:16px}}.cardLogUtility[_ngcontent-%COMP%]{color:#fff;text-align:left;padding-left:20px}.cardLogUtility[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:15px;opacity:.7;margin-bottom:7px}@media (max-width: 576px){.cardLogUtility[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px}}.cardUtlRow[_ngcontent-%COMP%]{margin-top:30px}.checkCircleIcon[_ngcontent-%COMP%]{display:block;margin:0 auto 5px;filter:invert(1);width:70px}']}),o})()}];let F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[_.Bz.forChild(L)],_.Bz]}),o})();var U=l(745);let q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[M.ez,F,x.u5,v.CT,b.uH,U.z8]]}),o})()}}]);