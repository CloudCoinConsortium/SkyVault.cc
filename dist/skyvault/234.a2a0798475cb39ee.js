"use strict";(self.webpackChunkskyvault=self.webpackChunkskyvault||[]).push([[234],{1234:(S,h,i)=>{i.r(h),i.d(h,{BalanceModule:()=>Z});var u=i(6019),g=i(4708),d=i(4762),p=i(5043),t=i(3556),_=i(3755),O=i(4071),M=i(5894),f=i(745),m=i(8329),C=i(3213);function x(e,r){if(1&e&&(t.TgZ(0,"h2",7),t.TgZ(1,"span",8),t._UZ(2,"fa-icon",9),t._uU(3),t.qZA(),t.qZA()),2&e){const n=t.oxw(3);t.s9C("tooltip",n.balanceBreakup),t.xp6(3),t.hij(" ",n.balanceString," CC")}}function P(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"img",5),t.YNc(2,x,4,2,"h2",6),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.opinions>1)}}function w(e,r){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"ng-lottie",10),t.NdJ("animationCreated",function(o){return t.CHM(n),t.oxw(2).animationCreated(o)}),t.qZA(),t.TgZ(2,"p"),t._uU(3,"Failed to Authenticate!"),t.qZA(),t.BQk()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("options",n.errorOptions)}}function b(e,r){if(1&e&&(t.ynx(0),t._UZ(1,"img",5),t.TgZ(2,"h3"),t._uU(3),t.TgZ(4,"span"),t._uU(5,"CC"),t.qZA(),t.qZA(),t._UZ(6,"div",11),t.BQk()),2&e){const n=t.oxw(2);t.xp6(3),t.Oqu(n.balanceString)}}function B(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"h2",3),t._uU(2,"Balance"),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,P,3,1,"ng-container",2),t.YNc(5,w,4,1,"ng-container",2),t.YNc(6,b,7,1,"ng-container",2),t.qZA(),t.BQk()),2&e){const n=t.oxw();t.xp6(4),t.Q6J("ngIf",n.opinions>1),t.xp6(1),t.Q6J("ngIf",n.isCounterfeit),t.xp6(1),t.Q6J("ngIf",1===n.opinions)}}function y(e,r){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"ng-lottie",10),t.NdJ("animationCreated",function(o){return t.CHM(n),t.oxw().animationCreated(o)}),t.qZA(),t.TgZ(2,"div",12),t._uU(3),t.qZA(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("options",n.errorOptions),t.xp6(2),t.Oqu(n.errorMessage)}}function v(e,r){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",13),t.TgZ(2,"ng-lottie",14),t.NdJ("animationCreated",function(o){return t.CHM(n),t.oxw().animationCreated(o)}),t.qZA(),t.TgZ(3,"span",15),t._uU(4),t.qZA(),t.qZA(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(2),t.Q6J("options",n.options),t.xp6(2),t.Oqu(n.loadingMessage)}}const T=[{path:"",component:(()=>{class e{constructor(n,a,o,s,l){this.auth=n,this.router=a,this.skyvault=o,this.changeDetectorRef=s,this.indc=l,this.fas=p.mRB,this.faCheck=p.LEp,this.faCross=p.xbW,this.balance=0,this.balanceString="0",this.balances={},this.errorMessage=null,this.options={path:"/assets/animations/cloud_loading.json"},this.errorOptions={path:"/assets/animations/error.json"},this.showLoader=!1,this.showNormal=!0,this.showError=!1,this.mySkyVault=null,this.balanceBreakup=null,this.opinions=0,this.loadingMessage="",this.isCounterfeit=!1,this.syncCount=0,this.showCoinsModal=!1,this.showCoinsDiv=!1,this.coinDetail=null,this.perRaidaBalance=null,this.selectedSNS=null,this.optionModal=!1,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.processing=!1}ngOnInit(){this.showLoading(!0),localStorage.setItem("job","0"),this.auth.getLoggedIn()||(this.auth.checkLoginStatus(),this.router.navigate(["/welcome"])),this.watch=this.auth.watch().subscribe(a=>{a||this.router.navigate(["/welcome"])});let n=0;this.watchIndicator=this.indc.currentRStatus.subscribe(a=>{0==Object.keys(a).length?(this.showLoading(!0),this.loadingMessage="Contacting RAIDA..."):0==n?(n++,setTimeout(()=>{this.checkBalance()},2e3)):this.processing||this.showLoading(!1)}),localStorage.getItem("skyvault")&&(this.mySkyVault=localStorage.getItem("skyvault"))}ngOnDestroy(){this.watch&&this.watch.unsubscribe(),this.watchIndicator&&this.watchIndicator.unsubscribe()}checkBalance(){return(0,d.mG)(this,void 0,void 0,function*(){if(this.showLoading(!0),this.processing=!0,localStorage.setItem("job","1"),this.loadingMessage="Fetching balance...",this.auth.getLoggedIn()){const n=this.auth.getToken();let a={sn:n.sn,an:n.an},o=yield this.skyvault.showBalance(a);if(localStorage.setItem("job","0"),console.log("SKYVAULT: showBalance response: ",o),o){this.balance=0,this.opinions=0;let s=0,l=0;if(this.balanceBreakup='<div style="text-align: left; display: table;">Your SkyVault is out of sync. Balance returned by RAIDA servers are as follows: <ul style="text-align: left!important;">',o.balances){this.balances=o.balances;for(const c in o.balances)o.balances.hasOwnProperty(c)&&(this.balanceBreakup+='<li style="text-align: left!important">'+o.balances[c]+" RAIDA(s) - "+parseInt(c).toLocaleString()+" cc </li>",o.balances[c]>s&&(s=o.balances[c],l=parseInt(c),this.balance=l,this.balanceString=this.balance.toLocaleString())),this.opinions++;this.balanceBreakup+="</ul></div>",this.opinions>1&&0==this.syncCount&&(this.syncCount++,yield this.syncAccount())}if(o.balancesPerRaida&&(this.perRaidaBalance=o.balancesPerRaida),"error"==o.status){if("The coin is counterfeit"!=o.errorText)return void this.showErrorMessage(o.errorText);this.isCounterfeit=!0}}this.showLoading(!1)}else this.auth.checkLoginStatus(),this.router.navigate(["welcome"])})}animationCreated(n){}syncAccount(){return(0,d.mG)(this,void 0,void 0,function*(){this.showLoading(!0);let n=!1;if(this.auth.getLoggedIn()){const a=this.auth.getToken();this.loadingMessage="Synchronizing SkyVault",localStorage.setItem("job","1");const o={sn:a.sn,an:a.an};let s=yield this.skyvault.fixCoinsSync(o);if(localStorage.setItem("job","0"),console.log("SKYVAULT: apiFixTransfer response: ",s),"done"!=s.status)return void this.showErrorMessage(s.errorText);n||(this.checkBalance(),n=!0)}else this.auth.checkLoginStatus(),this.router.navigate(["welcome"])})}sleep(n){return new Promise(a=>setTimeout(a,n))}showLoading(n){this.loadingMessage="",n?(this.showNormal=!1,this.showLoader=!0,this.showError=!1):(this.showNormal=!0,this.showLoader=!1,this.showError=!1)}showErrorMessage(n){this.errorMessage=n,this.showNormal=!1,this.showError=!0,this.showLoader=!1}hideErrorMessage(){this.errorMessage="",this.showNormal=!0,this.showError=!1,this.showLoader=!1}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(_.r),t.Y36(g.F0),t.Y36(O._),t.Y36(t.sBO),t.Y36(M.Q))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-balance"]],decls:5,vars:3,consts:[[1,"pageWrapper"],[1,"sectionWrapper"],[4,"ngIf"],[1,"pageHeading"],[1,"cardOne"],["src","assets/images/wealth.svg","alt","icon"],["class","welcomeMsg",3,"tooltip",4,"ngIf"],[1,"welcomeMsg",3,"tooltip"],[2,"color","#FF7777"],["icon","exclamation-circle"],["height","100px",3,"options","animationCreated"],[1,"gap10"],[1,"errorMsg",2,"color","#ffffff","margin-bottom","10px"],[1,"text-center"],["height","150px",3,"options","animationCreated"],[1,"errorMsg",2,"color","#ffffff"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,B,7,3,"ng-container",2),t.YNc(3,y,4,2,"ng-container",2),t.YNc(4,v,5,2,"ng-container",2),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngIf",a.showNormal),t.xp6(1),t.Q6J("ngIf",a.showError),t.xp6(1),t.Q6J("ngIf",a.showLoader))},directives:[u.O5,f.i9,m.BN,C.e$],styles:[".pageWrapper[_ngcontent-%COMP%]{width:100%;height:100%}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]{width:100%;min-height:350px;background-color:#272a4b;border-radius:30px;padding:25px;display:flex;justify-content:center;flex-direction:column;text-align:center}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:70px;margin:0 auto 15px}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:400}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:55px;color:#fff;font-weight:600}@media (max-width: 992px){.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:36px}}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{margin:25px auto 0;text-align:center;width:100%;display:flex;align-items:center;justify-content:center}@media (max-width: 576px){.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{flex-direction:column}}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]:first-child{margin-right:10px!important}@media (max-width: 576px){.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]:first-child{margin-bottom:10px!important;margin-right:0!important}}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]:last-child{margin-right:0!important}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:initial;margin:0 6px 0 0}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]:hover{background-color:#ffffff3b}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .tblScroll[_ngcontent-%COMP%]{max-height:180px;overflow:auto;display:block}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .tblHealthChk[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.5);border-right:1px solid rgba(255,255,255,.5)}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .tblHealthChk[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.5);border-top:0}.pageWrapper[_ngcontent-%COMP%]   .cardOne[_ngcontent-%COMP%]   .tblHealthChk[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400}.scroll1[_ngcontent-%COMP%]{overflow:auto;max-height:300px}.scrollFull[_ngcontent-%COMP%]{overflow:auto;display:flex;justify-content:space-between;align-items:center;max-width:750px}.blcbtnHolder[_ngcontent-%COMP%]{text-align:center;width:100%;justify-content:center;display:flex}.modalBtnWrapper[_ngcontent-%COMP%]{width:100%;height:initial;margin-top:10px}.modalBtnWrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px;color:#fff;font-weight:400;text-align:center}.modalBtnWrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]{margin:30px auto 0;text-align:center;width:100%}.modalBtnWrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]:first-child{margin-right:10px!important}@media (max-width: 576px){.modalBtnWrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]:first-child{margin-bottom:10px!important;margin-right:0!important}}.modalBtnWrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]:last-child{margin-right:0!important}.modalBtnWrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:initial;margin:0 6px 0 0}.modalBtnWrapper[_ngcontent-%COMP%]   .button-wrapper[_ngcontent-%COMP%]   .buttonCustome[_ngcontent-%COMP%]:hover{background-color:#ffffff3b}"]}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(T)],g.Bz]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,k,C.CT,m.uH,f.z8]]}),e})()}}]);