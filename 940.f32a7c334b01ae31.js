"use strict";(self.webpackChunkskyvault=self.webpackChunkskyvault||[]).push([[940],{940:(P,u,a)=>{a.r(u),a.d(u,{DropDebitCardImageModule:()=>J});var c=a(6019),D=a(7537),d=a(4708),b=a(4762),e=a(3556),w=a(3755),I=a(4071),Z=a(5894),g=a(847),h=a(3213);function T(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",14),e.NdJ("removed",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onRemove(s)}),e._UZ(1,"ngx-dropzone-label"),e.qZA()}if(2&o){const t=i.$implicit;e.Q6J("multiple",!1)("file",t)("removable",!0)}}function y(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"h2",2),e._uU(2,"Drop Your Pass Key Here"),e.qZA(),e._UZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.NdJ("change",function(n){return e.CHM(t),e.oxw().onSelect(n)}),e.TgZ(8,"ngx-dropzone-label"),e.TgZ(9,"div"),e._UZ(10,"img",8),e.TgZ(11,"span",9),e._uU(12,"Drop image here"),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,T,2,3,"ngx-dropzone-image-preview",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(14,"div",11),e.TgZ(15,"div",12),e.TgZ(16,"button",13),e._uU(17,"SUBMIT"),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("accept","image/*"),e.xp6(6),e.Q6J("ngForOf",t.files)}}function M(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"ng-lottie",15),e.NdJ("animationCreated",function(n){return e.CHM(t),e.oxw().animationCreated(n)}),e.qZA(),e.TgZ(2,"div",16),e._uU(3),e.qZA(),e.TgZ(4,"div",17),e.TgZ(5,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().hideErrorMessage()}),e._uU(6," Back "),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("options",t.errorOptions),e.xp6(2),e.Oqu(t.errorMessage)}}function A(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",17),e.TgZ(2,"ng-lottie",19),e.NdJ("animationCreated",function(n){return e.CHM(t),e.oxw().animationCreated(n)}),e.qZA(),e.TgZ(3,"span",20),e._uU(4),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("options",t.options),e.xp6(2),e.Oqu(t.loadingMessage)}}const S=[{path:"",component:(()=>{class o{constructor(t,r,n,s,p){this.auth=t,this.router=r,this.skyvault=n,this.changeDetectorRef=s,this.indc=p,this.files=[],this.errorMessage=null,this.options={path:"/assets/animations/cloud_login.json"},this.errorOptions={path:"/assets/animations/error.json"},this.showLoader=!1,this.showNormal=!0,this.showError=!1,this.loadingMessage=null,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){localStorage.setItem("job","0"),this.auth.getLoggedIn()&&this.router.navigate(["/balance"]),this.watchIndicator=this.indc.currentRStatus.subscribe(t=>{0==Object.keys(t).length?(this.options={path:"/assets/animations/cloud_loading.json"},this.showLoading(!0),this.loadingMessage="Contacting RAIDA..."):(this.options={path:"/assets/animations/cloud_login.json"},this.showLoading(!1),this.loadingMessage="")})}ngOnDestroy(){this.watchIndicator&&this.watchIndicator.unsubscribe()}onSelect(t){this.files.push(...t.addedFiles),this.files.length>1&&this.files.splice(0,t.addedFiles.length-1),setTimeout(()=>{this.getBase64(t)},1e3)}onRemove(t){this.files.splice(this.files.indexOf(t),1)}getBase64(t){const r=this,n=t.addedFiles[0],s=new FileReader,f=n.name.replace(/\.png$/,"");f.toLowerCase().endsWith(".skyvault.cc")?(s.readAsDataURL(n),s.onload=function(){return(0,b.mG)(this,void 0,void 0,function*(){const m={template:s.result};r.showLoading(!0),localStorage.setItem("job","1");let l=yield r.skyvault.loginWithCardImage(m);if(l)if(localStorage.setItem("job","0"),"error"===l.status)l.errorText.indexOf("PNG signature")?r.showErrorMessage("The dropped Pass Key is not valid. Please ensure you are using the original unmodified Pass Key, which can be modified if shared via messaging/file sharing apps."):r.showErrorMessage(l.errorText);else if("done"===l.status&&null!==l.cloudcoin&&l.cloudcoin.length>0){localStorage.setItem("cc",JSON.stringify(l.cloudcoin[0])),localStorage.setItem("skyvault",f),localStorage.setItem("statements","true"),r.auth.checkLoginStatus();let C=JSON.parse(localStorage.getItem("b4uPay")),v=JSON.parse(localStorage.getItem("bitmartPay")),x=JSON.parse(localStorage.getItem("merchantPay")),_=JSON.parse(localStorage.getItem("payRoute"));setTimeout(C?()=>{r.router.navigate(["/b4u"],{queryParams:C})}:v?()=>{r.router.navigate(["/bitmart"],{queryParams:v})}:_?()=>{r.router.navigate([_])}:x?()=>{r.router.navigate(["/payment"],{queryParams:x})}:()=>{r.router.navigate(["/balance"])},2500)}})},s.onerror=function(m){console.log("Error: ",m),r.showErrorMessage("Error reading Card Image")}):this.showErrorMessage("Invalid SkyVault account")}animationCreated(t){}showLoading(t){t?(this.showNormal=!1,this.showLoader=!0,this.showError=!1):(this.showNormal=!0,this.showLoader=!1,this.showError=!1)}showErrorMessage(t){this.errorMessage=t,this.showNormal=!1,this.showError=!0,this.showLoader=!1}hideErrorMessage(){this.errorMessage="",this.showNormal=!0,this.showError=!1,this.showLoader=!1}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w.r),e.Y36(d.F0),e.Y36(I._),e.Y36(e.sBO),e.Y36(Z.Q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-drop-debit-card-image"]],decls:4,vars:3,consts:[[1,"debitCardWrapper"],[4,"ngIf"],[1,"pageHeading"],[1,"gap20"],[1,"row"],[1,"col-md-8","offset-md-2"],[1,"dropDebitcardWrapOuter"],["ngx-dropzone","",1,"dropDebitcardWrap",3,"accept","change"],["src","assets/images/debit-card_drop.svg","alt","drop icon",1,"dropIcon"],[1,"dropLabel"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"multiple","file","removable","removed",4,"ngFor","ngForOf"],[1,"gap30"],[2,"text-align","center"],[1,"buttonCustome"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"multiple","file","removable","removed"],["height","100px",3,"options","animationCreated"],[1,"errorMsg",2,"color","#ffffff","margin-bottom","10px"],[1,"text-center"],[1,"buttonCustome",3,"click"],["height","150px",3,"options","animationCreated"],[1,"errorMsg",2,"color","#ffffff"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,y,18,2,"ng-container",1),e.YNc(2,M,7,2,"ng-container",1),e.YNc(3,A,5,2,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",r.showNormal),e.xp6(1),e.Q6J("ngIf",r.showError),e.xp6(1),e.Q6J("ngIf",r.showLoader))},directives:[c.O5,g._f,g.Jj,c.sg,g.sv,h.e$],styles:[".debitCardWrapper[_ngcontent-%COMP%]{width:100%;height:100%;overflow-x:hidden}.debitCardWrapper[_ngcontent-%COMP%]   .pageHeading[_ngcontent-%COMP%]{text-align:center}"]}),o})()}];let N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(S)],d.Bz]}),o})();var O=a(8329);let J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,N,D.u5,g.bB,h.CT,O.uH]]}),o})()}}]);